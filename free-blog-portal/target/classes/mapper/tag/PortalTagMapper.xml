<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.blog.core.tag.dao.PortalTagMapper">

    <select id="selectTagByPage" resultType="com.blog.core.tag.entity.vo.PortalTagVO" parameterType="com.blog.core.tag.entity.qo.PortalTagQueryDTO">
        SELECT
        id,
        tag_name tagName,
        tag_category_id,
        create_time createTime
        FROM
        sys_base_tag
        <where>
            <if test="tagName != null and tagName != ''">
                tag_name = #{tagName}
            </if>
        </where>
        ORDER BY create_time DESC
    </select>

    <select id="selectTagByArticleId" parameterType="java.lang.String" resultType="com.blog.core.tag.entity.vo.PortalTagVO">
        SELECT
            tag.id,
            tag.tag_name tagName,
            tag.tag_category_id,
            tag.create_time createTime
        FROM
            sys_base_tag tag
            LEFT JOIN sys_base_article_tag sbat ON tag.id = sbat.tag_id
            LEFT JOIN sys_base_article article ON article.id = sbat.article_id
        WHERE article.id = #{articleId}
        ORDER BY tag.create_time DESC
    </select>
</mapper>
